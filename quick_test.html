<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <title>×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×—× ×™×•×Ÿ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .pending { background: #fff3cd; color: #856404; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” ×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×—× ×™×•×Ÿ</h1>
        <p>×›×ª×•×‘×ª: <strong>192.117.0.122:8240</strong></p>
        
        <button onclick="testConnections()">×”×ª×—×œ ×‘×“×™×§×”</button>
        
        <div id="results"></div>
        
        <h3>ğŸ’¡ ××” ×œ×¢×©×•×ª ×× ×›×œ ×”×‘×“×™×§×•×ª × ×›×©×œ×•×ª:</h3>
        <ol>
            <li><strong>×‘×“×•×§ ×©×”×—× ×™×•×Ÿ ×¤×¢×™×œ:</strong> ×”×× ×”×©×™×¨×•×ª ×¨×¥ ×¢×œ ×”×©×¨×ª?</li>
            <li><strong>×‘×“×•×§ ×¤×™×™×¨×•×•×œ:</strong> ×”×× ×¤×•×¨×˜ 8240 ×¤×ª×•×— ×œ×’×™×©×” ×—×™×¦×•× ×™×ª?</li>
            <li><strong>×‘×“×•×§ binding:</strong> ×”×× ×”×©×™×¨×•×ª ×××–×™×Ÿ ×¢×œ 0.0.0.0 ××• ×¨×§ ×¢×œ 127.0.0.1?</li>
            <li><strong>×‘×“×•×§ ×”×’×‘×œ×•×ª IP:</strong> ×”×× ×™×© whitelist ×©×œ ×›×ª×•×‘×•×ª IP?</li>
        </ol>
    </div>

    <script>
        async function testConnections() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>×ª×•×¦××•×ª ×”×‘×“×™×§×”:</h2>';
            
            const tests = [
                { name: 'HTTP ×¢×œ ×¤×•×¨×˜ 8240', url: 'http://192.117.0.122:8240/api/contracts' },
                { name: 'HTTPS ×¢×œ ×¤×•×¨×˜ 8240', url: 'https://192.117.0.122:8240/api/contracts' },
                { name: 'HTTP ×¢×œ ×¤×•×¨×˜ 80', url: 'http://192.117.0.122/api/contracts' },
                { name: 'HTTP ×‘×œ×™ /api', url: 'http://192.117.0.122:8240/contracts' },
            ];
            
            for (const test of tests) {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'result pending';
                resultDiv.innerHTML = `â³ ×‘×•×“×§: ${test.name}...`;
                resultsDiv.appendChild(resultDiv);
                
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(test.url, {
                        mode: 'no-cors',
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    // no-cors means we can't read the response, but if we got here without error, something responded
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `âœ… ${test.name}: ××©×”×• ×”×’×™×‘ (××‘×œ ×™×© CORS)`;
                } catch (error) {
                    if (error.name === 'AbortError') {
                        resultDiv.className = 'result error';
                        resultDiv.innerHTML = `âŒ ${test.name}: Timeout - ××™×Ÿ ×ª×’×•×‘×”`;
                    } else {
                        resultDiv.className = 'result error';
                        resultDiv.innerHTML = `âŒ ${test.name}: ${error.message}`;
                    }
                }
            }
            
            resultsDiv.innerHTML += '<hr><p><strong>×¡×™×•× ×”×‘×“×™×§×”.</strong> ×× ×›×œ ×”×‘×“×™×§×•×ª × ×›×©×œ×•, ×”×—× ×™×•×Ÿ ×œ× × ×’×™×© ××”××™× ×˜×¨× ×˜.</p>';
        }
    </script>
</body>
</html>
